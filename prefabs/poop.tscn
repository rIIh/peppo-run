[gd_scene load_steps=9 format=3 uid="uid://cdxd7ajqqv4vb"]

[ext_resource type="Script" path="res://scripts/poop.gd" id="1_wa74g"]
[ext_resource type="Script" path="res://scripts/poop/poop_style_changer.gd" id="2_s4xoi"]
[ext_resource type="Resource" uid="uid://bxmo20wqjared" path="res://resources/poops/orange.tres" id="3_qtnn3"]
[ext_resource type="Texture2D" uid="uid://g70ye0uqqmgi" path="res://assets/poops/orange/poop__waiting.png" id="3_tc0yr"]
[ext_resource type="Script" path="res://scripts/draw_path.gd" id="4_qmamc"]

[sub_resource type="GDScript" id="GDScript_ehi5v"]
resource_name = "poop_character_trigger"
script/source = "extends Area2D


@onready
var poop: Poop = get_parent()

func _ready():
	body_entered.connect(_handle_body_entered)
	
func _handle_body_entered(body: Node2D):
	poop.collide(body)
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2uyyo"]
size = Vector2(82, 63)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hsdn7"]
size = Vector2(102, 108)

[node name="poop_character" type="CharacterBody2D"]
collision_layer = 3
input_pickable = true
script = ExtResource("1_wa74g")

[node name="poop_sprite_changer" type="Node" parent="." node_paths=PackedStringArray("poop", "sprite", "line_renderer")]
script = ExtResource("2_s4xoi")
style = ExtResource("3_qtnn3")
poop = NodePath("..")
sprite = NodePath("../poop_sprite")
line_renderer = NodePath("../static/trajectory_renderer")

[node name="static" type="Node" parent="."]

[node name="trajectory_planner" type="Node2D" parent="static" node_paths=PackedStringArray("line_renderer", "start_drawing_trigger")]
script = ExtResource("4_qmamc")
line_renderer = NodePath("../trajectory_renderer")
start_drawing_trigger = NodePath("../..")

[node name="trajectory_renderer" type="Line2D" parent="static"]
width = 6.0
default_color = Color(0.90625, 0.6875, 0.488281, 1)
begin_cap_mode = 2
end_cap_mode = 2

[node name="trigger" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 2
script = SubResource("GDScript_ehi5v")

[node name="poop_collider" type="CollisionShape2D" parent="trigger"]
position = Vector2(0, -32.5)
shape = SubResource("RectangleShape2D_2uyyo")

[node name="poop_collider" type="CollisionShape2D" parent="."]
position = Vector2(0, -47)
shape = SubResource("RectangleShape2D_hsdn7")

[node name="poop_sprite" type="Sprite2D" parent="."]
z_index = 1
texture_filter = 6
position = Vector2(0, -42)
texture = ExtResource("3_tc0yr")
